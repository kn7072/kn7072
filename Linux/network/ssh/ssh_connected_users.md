[источник](https://ru.console-linux.com/?p=19699)

- [ 4 команды для просмотра зарегистрированных пользователей в Linux](#link_1)
  - [ 1. Используйте команду w, чтобы увидеть вошедших в систему пользователей в Linux.](#link_2)
  - [ 2. Проверьте, кто вошел в систему с помощью команды who.](#link_3)
  - [ 3. Просто войдите в систему с помощью команды пользователей.](#link_4)
  - [ 4. Использование команды пальца для просмотра вошедших в систему пользователей.](#link_5)
  - [ Дополнительный совет: посмотрите, кто входил в вашу систему с момента последней перезагрузки.](#link_6)

В системе Linux каждая попытка входа в систему с использованием SSH  
записывается в файл журнала, файл журнала находится в **/var/log/auth.log или /var/log/secure**. В некоторых дистрибутивах расположение файла логов может быть другим.

Если вы не нашли файл с логами подключений в своей системе, попробуйте выполнить приведенную ниже команду, чтобы просмотреть журнал из systemctl.

> journalctl -u sshd | tail -100

**Проверьте, кто вошел в вашу систему Linux, с помощью этих простых команд. Вы также можете получить дополнительную информацию о вошедших в систему пользователях, например время их входа в систему.**

Вам когда-нибудь было интересно узнать, кто вошел в вашу систему Linux? Вы всегда можете перечислить всех пользователей вашей системы Linux, но не все из них будут входить в систему постоянно.

Если вы работаете в многопользовательской среде Linux, например на сервере Linux, проверка вошедших в систему пользователей может быть одновременно полезной и интересной.

В этом уроке я покажу вам различные способы перечисления вошедших в систему пользователей в Linux.

## 4 команды для просмотра зарегистрированных пользователей в Linux <a name="link_1"></a>

Почти все эти команды используют данные, хранящиеся в каталоге /var или /proc. Если вы немного знакомы со структурой каталогов в Linux, то знаете, что эти два каталога содержат данные о запущенных процессах в вашей системе.

### 1. Используйте команду w, чтобы увидеть вошедших в систему пользователей в Linux. <a name="link_2"></a>

Может ли это быть проще? Просто введите однобуквенную команду в терминале, и она покажет текущих пользователей, вошедших в систему в Linux.

```bash
w
```

А вот вывод команды w:

```bash
abhi@test-server:~$ w
 09:54:54 up 26 min,  3 users,  load average: 0.00, 0.00, 0.00
USER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT
root     pts/0    202.91.87.114    09:37   21.00s  0.00s  0.00s -bash
abhi     pts/1    202.91.87.114    09:47    0.00s  0.00s  0.00s w
rohini   pts/2    157.43.53.142    09:48    6:13   0.00s  0.00s -bash
```

Позвольте мне объяснить несколько терминов в выводе команды w. Те же термины будут использоваться и в других командах.

TTY предоставляет вам информацию о терминале, который использовался для входа в систему. pts означает подчиненный псевдотерминал, который указывает, что пользователь вошел в систему через SSH-соединение.

Он показывает IP-адрес компьютера пользователя и время входа в систему. Вы также можете увидеть, как долго пользователь бездействовал (бездельничал на работе? :D).

JCPU — это время, используемое всеми процессами, подключенными к TTY, а PCPU — это время, используемое текущим процессом, запущенным пользователем. Вы можете увидеть текущий процесс в столбце «ЧТО».

### 2. Проверьте, кто вошел в систему с помощью команды who. <a name="link_3"></a>

Кто командует – еще один простой вопрос. Просто введите who, и он покажет, кто в данный момент вошел в вашу систему Linux.

```bash
who
```

Вы также можете увидеть время входа и IP-адрес вошедшего в систему пользователя.

```bash
abhi@test-server:~$ who
root     pts/0        Aug  6 09:37 (202.91.87.114)
abhi     pts/1        Aug  6 09:47 (202.91.87.114)
rohini   pts/2        Aug  6 09:48 (157.43.53.142)
```

### 3. Просто войдите в систему с помощью команды пользователей. <a name="link_4"></a>

Все команды, которые вы видели до сих пор, дают вам много информации о вошедших в систему пользователях. Если вы работаете над сценарием и хотите знать только имена вошедших в систему пользователей, анализ вывода этих команд будет дополнительной и несколько сложной задачей.

Здесь вам может помочь команда пользователей. Эта команда выводит только зарегистрированных пользователей и ничего больше.

```bash
abhi@test-server:~$ users
abhi rohini root
```

### 4. Использование команды пальца для просмотра вошедших в систему пользователей. <a name="link_5"></a>

Возможно, вам придется сначала установить команду Finger, поскольку не во всех дистрибутивах Linux она установлена по умолчанию.

Он доступен в репозитории юниверсов Ubuntu, и вы можете установить его с помощью этой команды:

```bash
sudo apt install finger
```

После установки просто введите палец в терминал:

```bash
finger
```

И вы увидите, кто вошел в вашу систему Linux.

```bash
abhi@test-server:~$ finger
Login     Name             Tty      Idle  Login Time   Office     Office Phone
abhi      Abhishek         pts/1          Aug  6 09:47 (202.91.87.114)
rohini    Rohini Rachita   pts/2      13  Aug  6 09:48 (157.43.53.142)
root      root            *pts/0          Aug  6 09:37 (202.91.87.114)
```

### Дополнительный совет: посмотрите, кто входил в вашу систему с момента последней перезагрузки. <a name="link_6"></a>

То, что вы видели до сих пор, касалось пользователей, вошедших в систему в данный момент. Как узнать, вышел ли пользователь?

Последняя команда в Linux предоставляет информацию обо всех пользователях, вошедших в систему с момента последней перезагрузки. Он также покажет время входа и выхода вышедших из системы пользователей.

```bash
last
```

Вот вывод последней команды, который, я думаю, не требует пояснений.

```bash
abhi@test-server:~$ last
rohini   pts/3        157.43.53.142    Tue Aug  6 10:05 - 10:05  (00:00)
rohini   pts/2        157.43.53.142    Tue Aug  6 09:48   still logged in
abhi     pts/1        202.91.87.114    Tue Aug  6 09:47   still logged in
root     pts/0        202.91.87.114    Tue Aug  6 09:37   still logged in
reboot   system boot  4.15.0-52-generi Tue Aug  6 09:28   still running

wtmp begins Tue Aug  6 09:28:43 2019
```
