[–∏—Å—Ç–æ—á–Ω–∏–∫](https://niceos.ru/docs/fajlovye-sistemy-v-kontejnerah?ysclid=mlozzwxjcr643143303)

- [ 1. –í–≤–µ–¥–µ–Ω–∏–µ](#link_1)
  - [ üì¶ –ö–∞–∫ —É—Å—Ç—Ä–æ–µ–Ω–æ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö](#link_2)
  - [ üîç –ó–∞—á–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª–æ–≤—ã–µ —Å–∏—Å—Ç–µ–º—ã](#link_3)
  - [ üóÇÔ∏è –§–∞–π–ª–æ–≤—ã–µ —Å–∏—Å—Ç–µ–º—ã —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π CoW](#link_4)
- [ 2. –°–ª–æ–∏ –æ–±—Ä–∞–∑–æ–≤ –∏ Copy-on-Write](#link_5)
  - [ üß± –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–ª–æ—ë–≤](#link_6)
  - [ üìÑ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç Copy-on-Write](#link_7)
  - [ üí° –ü—Ä–∏–º–µ—Ä: –∑–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∏ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–∞](#link_8)
- [ 3. OverlayFS / overlay2](#link_9)
  - [ üîß –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç OverlayFS](#link_10)
  - [ ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ overlay2](#link_11)
  - [ ‚ö†Ô∏è –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ overlay2](#link_12)
- [ 4. AUFS (—É—Å—Ç–∞—Ä–µ–≤—à–∏–π, –Ω–æ –≤—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è)](#link_13)
  - [ üîß –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∞—è —Ä–æ–ª—å AUFS](#link_14)
  - [ ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ AUFS](#link_15)
  - [ ‚ùå –ü–æ—á–µ–º—É AUFS –±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è](#link_16)
- [ 5. Btrfs –∫–∞–∫ backend –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤](#link_17)
  - [ üß© –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ Btrfs](#link_18)
  - [ ‚öôÔ∏è –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ Docker / Podman](#link_19)
  - [ ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Btrfs](#link_20)
  - [ ‚ö†Ô∏è –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏](#link_21)
- [ 6. ZFS –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤](#link_22)
  - [ üîß –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ ZFS –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö](#link_23)
  - [ ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ ZFS](#link_24)
  - [ ‚ö†Ô∏è –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏](#link_25)
- [ 7. –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥—Ä–∞–π–≤–µ—Ä–æ–≤ —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ Docker / Podman](#link_26)
- [ 8. –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏](#link_27)
  - [ üì¶ **overlay2 –Ω–∞ Ubuntu/Debian**](#link_28)
  - [ ‚öôÔ∏è **btrfs –¥–ª—è embedded –∏ CI/CD**](#link_29)
  - [ üíº **ZFS –Ω–∞ –Ω–∞–¥—ë–∂–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö**](#link_30)
  - [ üö´ **–ö–æ–≥–¥–∞ –Ω–µ —Å—Ç–æ–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å overlay2**](#link_31)
- [ 9. –°–æ–≤–µ—Ç—ã –ø–æ –≤—ã–±–æ—Ä—É](#link_32)
- [ 10. –ó–∞–∫–ª—é—á–µ–Ω–∏–µ](#link_33)

# –§–∞–π–ª–æ–≤—ã–µ —Å–∏—Å—Ç–µ–º—ã –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö

## 1. –í–≤–µ–¥–µ–Ω–∏–µ <a name="link_1"></a>

–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã ‚Äî —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å—ã —Å –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –æ–∫—Ä—É–∂–µ–Ω–∏–µ–º, –Ω–æ –∏ **–∏–µ—Ä–∞—Ä—Ö–∏—è —Ñ–∞–π–ª–æ–≤**, –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ–±—Ä–∞–∑–æ–≤. –§–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –∏–≥—Ä–∞–µ—Ç –∫–ª—é—á–µ–≤—É—é —Ä–æ–ª—å –≤ —Ç–æ–º, –∫–∞–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç, –∫–∞–∫ –±—ã—Å—Ç—Ä–æ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∏ –Ω–∞—Å–∫–æ–ª—å–∫–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —Ä–∞—Å—Ö–æ–¥—É–µ—Ç —Ä–µ—Å—É—Ä—Å—ã.

##### üì¶ –ö–∞–∫ —É—Å—Ç—Ä–æ–µ–Ω–æ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö <a name="link_2"></a>

- –ö–∞–∂–¥—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å–æ–∑–¥–∞—ë—Ç—Å—è –Ω–∞ –±–∞–∑–µ **—Å–ª–æ—ë–≤ –æ–±—Ä–∞–∑–∞** (read-only).
- –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤–Ω–æ—Å—è—Ç—Å—è –≤ **–≤–µ—Ä—Ö–Ω–∏–π —Å–ª–æ–π**, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≤—Å—ë –Ω–æ–≤–æ–µ –∏ —É–¥–∞–ª—ë–Ω–Ω–æ–µ.
- –¢–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ —Ç—Ä–µ–±—É–µ—Ç **Copy-on-Write (CoW)** –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –∏ —Å–∫–æ—Ä–æ—Å—Ç–∏ –∑–∞–ø—É—Å–∫–∞.

![container storage layers](https://docs.docker.com/storage/storagedriver/images/container-layers.png)

–°–ª–æ–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞: read-only + writable –≤–µ—Ä—Ö–Ω–∏–π —Å–ª–æ–π

##### üîç –ó–∞—á–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª–æ–≤—ã–µ —Å–∏—Å—Ç–µ–º—ã <a name="link_3"></a>

- –§–° —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π CoW –ø–æ–∑–≤–æ–ª—è–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –º–Ω–æ–≥–æ—Å–ª–æ–π–Ω—ã–º–∏ –æ–±—Ä–∞–∑–∞–º–∏.
- –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –¥—Ä–∞–π–≤–µ—Ä—ã —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ —Ç—Ä–µ–±—É—é—Ç —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –æ—Ç –§–° (snapshots, subvolumes).
- –ù–∞ –≤—ã–±–æ—Ä –§–° –≤–ª–∏—è–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å –∏ –≥–∏–±–∫–æ—Å—Ç—å –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–ª–æ—ë–≤.

üí° **Copy-on-Write (CoW)** ‚Äî —ç—Ç–æ –º–µ—Ö–∞–Ω–∏–∑–º, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏, –Ω–µ –∫–æ–ø–∏—Ä—É—è –≤—Å–µ –¥–∞–Ω–Ω—ã–µ. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —ç–∫–æ–Ω–æ–º–∏—Ç—å –º–µ—Å—Ç–æ –∏ —É—Å–∫–æ—Ä—è–µ—Ç –∑–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤.

##### üóÇÔ∏è –§–∞–π–ª–æ–≤—ã–µ —Å–∏—Å—Ç–µ–º—ã —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π CoW <a name="link_4"></a>

- **overlay2** (–Ω–∞ –±–∞–∑–µ OverlayFS) ‚Äî –≤—Å—Ç—Ä–æ–µ–Ω–∞ –≤ —è–¥—Ä–æ Linux, –¥–µ—Ñ–æ–ª—Ç –≤ Docker/Podman.
- **Btrfs** ‚Äî CoW, —Å–Ω–∞–ø—à–æ—Ç—ã, —Å—É–±—Ç–æ–º—ã, —Å–∂–∞—Ç–∏–µ, –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω—ã—Ö —Ö–æ—Å—Ç–æ–≤.
- **ZFS** ‚Äî —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –∑–∞—â–∏—Ç—ã, –æ—Å–æ–±–µ–Ω–Ω–æ –¥–ª—è —Å–µ—Ä–≤–µ—Ä–æ–≤.
- **AUFS** ‚Äî —É—Å—Ç–∞—Ä–µ–≤—à–∞—è, –Ω–æ —Ä–∞–Ω–µ–µ –ø–æ–ø—É–ª—è—Ä–Ω–∞—è –≤ Docker (–¥–æ overlay2).

‚öôÔ∏è –§–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω–æ–≥–æ —Ö–æ—Å—Ç–∞ –≤–ª–∏—è–µ—Ç –Ω–∞:  
‚Äî –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å I/O;  
‚Äî —Å–∫–æ—Ä–æ—Å—Ç—å –∑–∞–ø—É—Å–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤;  
‚Äî –ø–æ–¥–¥–µ—Ä–∂–∫—É —Å–Ω–∞–ø—à–æ—Ç–æ–≤ –∏ –æ—Ç–∫–∞—Ç–æ–≤;  
‚Äî –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö.

## 2. –°–ª–æ–∏ –æ–±—Ä–∞–∑–æ–≤ –∏ Copy-on-Write <a name="link_5"></a>

–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω–∞—è —Ñ–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞ –Ω–∞ —Å–ª–æ–∏—Å—Ç–æ–º –ø—Ä–∏–Ω—Ü–∏–ø–µ. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —ç–∫–æ–Ω–æ–º–∏—Ç—å –º–µ—Å—Ç–æ, —É—Å–∫–æ—Ä—è—Ç—å —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±—â–∏–π –∫—ç—à –º–µ–∂–¥—É —Ä–∞–∑–Ω—ã–º–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏.

##### üß± –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–ª–æ—ë–≤ <a name="link_6"></a>

- **Base Image (–±–∞–∑–æ–≤—ã–π —Å–ª–æ–π)** ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä, `ubuntu:22.04`. –û–Ω —Å–æ–¥–µ—Ä–∂–∏—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é —Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É.
- **Intermediate layers** ‚Äî –∫–∞–∂–¥—ã–π —à–∞–≥ –≤ `Dockerfile` –¥–æ–±–∞–≤–ª—è–µ—Ç read-only —Å–ª–æ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, `RUN apt install`).
- **Writable layer (–≤–µ—Ä—Ö–Ω–∏–π —Å–ª–æ–π)** ‚Äî —Å–æ–∑–¥–∞—ë—Ç—Å—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞. –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–¥—É—Ç —Å—é–¥–∞.

![Docker image and container layers](https://docs.docker.com/storage/storagedriver/images/driver-layer-diagram.png)

–ú–æ–¥–µ–ª—å CoW: read-only —Å–ª–æ–∏ + writable –≤–µ—Ä—Ö–Ω–∏–π —Å–ª–æ–π

##### üìÑ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç Copy-on-Write <a name="link_7"></a>

–ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ñ–∞–π–ª–∞ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ:

1. –§–∞–π–ª –æ—Å—Ç–∞—ë—Ç—Å—è –≤ read-only —Å–ª–æ–µ.
2. –ö–æ–≥–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–∏—à–µ—Ç –≤ –Ω–µ–≥–æ ‚Äî —Å–æ–∑–¥–∞—ë—Ç—Å—è **–∫–æ–ø–∏—è –≤ –≤–µ—Ä—Ö–Ω–µ–º —Å–ª–æ–µ**.
3. –î–∞–ª—å–Ω–µ–π—à–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞—Ç—Ä–∞–≥–∏–≤–∞—é—Ç —Ç–æ–ª—å–∫–æ —ç—Ç—É –∫–æ–ø–∏—é.

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–µ—Å—è—Ç–∫–∞–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –æ–±—Ä–∞–∑, –Ω–µ –∑–∞–Ω–∏–º–∞—è –º–µ—Å—Ç–æ –Ω–∞ –¥–∏—Å–∫–µ.

##### üí° –ü—Ä–∏–º–µ—Ä: –∑–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∏ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ <a name="link_8"></a>

```
# –°–æ–∑–¥–∞—ë–º –∏ –∑–∞–ø—É—Å–∫–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker run -it ubuntu bash

# –í–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Å–æ–∑–¥–∞—ë–º —Ñ–∞–π–ª
echo "Hello" > /hello.txt
```

–≠—Ç–æ—Ç —Ñ–∞–π–ª –ø–æ—è–≤–∏—Ç—Å—è **—Ç–æ–ª—å–∫–æ –≤ –≤–µ—Ä—Ö–Ω–µ–º —Å–ª–æ–µ** —Ç–µ–∫—É—â–µ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞. –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –æ–Ω –±—É–¥–µ—Ç –ø–æ—Ç–µ—Ä—è–Ω, –Ω–æ base image –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –Ω–µ–∏–∑–º–µ–Ω–Ω—ã–º.

‚ö†Ô∏è CoW –Ω–µ –æ–∑–Ω–∞—á–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Å–Ω–∞–ø—à–æ—Ç–æ–≤ ‚Äî —ç—Ç–æ –ª–∏—à—å –º–µ—Ö–∞–Ω–∏–∑–º —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –ø–æ–≤–µ—Ä—Ö –±–∞–∑–æ–≤—ã—Ö —Å–ª–æ—ë–≤.

üí° –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –§–°, —Ç–∞–∫–∏–µ –∫–∞–∫ **Btrfs** –∏ **ZFS**, —Ä–µ–∞–ª–∏–∑—É—é—Ç CoW –Ω–∞ —É—Ä–æ–≤–Ω–µ –≤—Å–µ–π —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã, –ø–æ–∑–≤–æ–ª—è—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏ –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –¥—Ä–∞–π–≤–µ—Ä–∞.

## 3. OverlayFS / overlay2 <a name="link_9"></a>

**OverlayFS** ‚Äî —ç—Ç–æ –º–æ–¥—É–ª—å —è–¥—Ä–∞ Linux, —Ä–µ–∞–ª–∏–∑—É—é—â–∏–π –ø—Ä–æ—Å—Ç—É—é, –Ω–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—É—é **CoW-—Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É** –ø—É—Ç—ë–º –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π –≤ –æ–¥–Ω—É "—Å–ª–æ–∂–µ–Ω–Ω—É—é" —Å—Ç—Ä—É–∫—Ç—É—Ä—É. –í–µ—Ä—Å–∏—è `overlay2` —Å—Ç–∞–ª–∞ **–¥–µ—Ñ–æ–ª—Ç–Ω—ã–º –¥—Ä–∞–π–≤–µ—Ä–æ–º —Ö—Ä–∞–Ω–µ–Ω–∏—è** –≤ Docker –∏ Podman –Ω–∞—á–∏–Ω–∞—è —Å Linux 4.x.

##### üîß –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç OverlayFS <a name="link_10"></a>

OverlayFS –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–ª–æ—ë–≤:

- `lowerdir` ‚Äî –æ–¥–∏–Ω –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ read-only —Å–ª–æ—ë–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –±–∞–∑–æ–≤—ã–π –æ–±—Ä–∞–∑);
- `upperdir` ‚Äî –∑–∞–ø–∏—Å—ã–≤–∞–µ–º—ã–π —Å–ª–æ–π, –∫—É–¥–∞ –∏–¥—É—Ç –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞;
- `workdir` ‚Äî —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è CoW;
- `merged` ‚Äî —Ä–µ–∑—É–ª—å—Ç–∏—Ä—É—é—â–∏–π mount, –≤–∏–¥–∏–º—ã–π –∫–∞–∫ –µ–¥–∏–Ω–∞—è –§–° –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.

```
# –ü—Ä–∏–º–µ—Ä —Ä—É—á–Ω–æ–≥–æ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è overlay:
sudo mount -t overlay overlay \
  -o lowerdir=/image/layer1:/image/layer0,upperdir=/container/changes,workdir=/container/work \
  /container/merged
```

üí° **Docker** –∏ **Podman** –∏—Å–ø–æ–ª—å–∑—É—é—Ç `overlay2` –∫–∞–∫ –¥—Ä–∞–π–≤–µ—Ä —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –Ω–∞ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º (Ubuntu, CentOS, Fedora, Arch –∏ –¥—Ä.).

##### ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ overlay2 <a name="link_11"></a>

- üì¶ **–í—Å—Ç—Ä–æ–µ–Ω–æ –≤ —è–¥—Ä–æ** ‚Äî –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –≤–Ω–µ—à–Ω–∏—Ö –º–æ–¥—É–ª–µ–π –∏–ª–∏ –ø–∞—Ç—á–µ–π.
- ‚öôÔ∏è **–ü—Ä–æ—Å—Ç–æ—Ç–∞ –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å** ‚Äî –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è upstream, —Ä–∞–±–æ—Ç–∞–µ—Ç ¬´–∏–∑ –∫–æ—Ä–æ–±–∫–∏¬ª.
- üß± **–ù–µ —Ç—Ä–µ–±—É–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ —Ä–∞–∑–¥–µ–ª–∞** –∏–ª–∏ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–π –§–° (—Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–≤–µ—Ä—Ö ext4, xfs –∏ —Ç.–¥.).
- üöÄ **–ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤** –∑–∞ —Å—á—ë—Ç –±—ã—Å—Ç—Ä–æ–π —Å–±–æ—Ä–∫–∏ —Å–ª–æ—è "merged".

##### ‚ö†Ô∏è –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ overlay2 <a name="link_12"></a>

- üîï **inotify –∏ overlay:** –Ω–µ –≤—Å–µ–≥–¥–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–ª–µ–∂–µ–Ω–∏–µ –∑–∞ —Ñ–∞–π–ª–∞–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ hot-reload).
- üß† **–ö—ç—à inode –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è** –º–µ–∂–¥—É —Å–ª–æ—è–º–∏, —á—Ç–æ –≤–ª–∏—è–µ—Ç –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –±–æ–ª—å—à–∏—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π.
- üìâ **–ù–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ —Å–∂–∞—Ç–∏—è –∏–ª–∏ –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏** (–≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç Btrfs/ZFS).

üß© **–í—ã–≤–æ–¥:** `overlay2` ‚Äî –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –≤—ã–±–æ—Ä –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: –ª—ë–≥–∫–∏–π, –±—ã—Å—Ç—Ä—ã–π, –±–µ–∑ —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π. –ù–æ –≤ —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö —Å –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ–π —Ñ–∞–π–ª–æ–≤–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å—é –∏–ª–∏ inotify-heavy –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏ —Å—Ç–æ–∏—Ç —Ä–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å Btrfs/ZFS.

## 4. AUFS (—É—Å—Ç–∞—Ä–µ–≤—à–∏–π, –Ω–æ –≤—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è) <a name="link_13"></a>

**AUFS (Another Union File System)** ‚Äî —Ñ–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è —Å–ª–æ—ë–≤, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–≤—à–∞—è—Å—è –≤ Docker –¥–æ 2016 –≥–æ–¥–∞ –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–π –º–µ—Ö–∞–Ω–∏–∑–º —Ö—Ä–∞–Ω–µ–Ω–∏—è. –û–Ω–∞ –ø–æ–∑–≤–æ–ª—è–ª–∞ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —Å–æ–±–∏—Ä–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö read-only –∏ writable —Å–ª–æ—ë–≤.

‚ö†Ô∏è AUFS –Ω–µ –≤—Ö–æ–¥–∏—Ç –≤ –æ—Å–Ω–æ–≤–Ω–æ–µ —è–¥—Ä–æ Linux (_mainline_) –∏ —Ç—Ä–µ–±—É–µ—Ç —Ä—É—á–Ω–æ–≥–æ –≤–∫–ª—é—á–µ–Ω–∏—è/–ø–∞—Ç—á–∞ —è–¥—Ä–∞.

##### üîß –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∞—è —Ä–æ–ª—å AUFS <a name="link_14"></a>

- Docker –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª AUFS –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–æ –ø–æ—è–≤–ª–µ–Ω–∏—è `overlay2`.
- –†–∞–±–æ—Ç–∞–ª –Ω–∞ —Å–∏—Å—Ç–µ–º–∞—Ö —Å **—Å—Ç–∞—Ä—ã–º —è–¥—Ä–æ–º (2.6.x‚Äì3.x)**, –≥–¥–µ OverlayFS –µ—â—ë –Ω–µ –±—ã–ª –¥–æ—Å—Ç—É–ø–µ–Ω –∏–ª–∏ —Å—Ç–∞–±–∏–ª–µ–Ω.
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–ª –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –¥–æ **128 —Å–ª–æ—ë–≤** –≤ –æ–¥–∏–Ω namespace.

##### ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ AUFS <a name="link_15"></a>

- üß± **–ì–∏–±–∫–∞—è —Ä–∞–±–æ—Ç–∞ —Å –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º —Å–ª–æ—ë–≤** ‚Äî –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –æ–±—Ä–∞–∑–æ–≤.
- üìÑ **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ whiteout-—Ñ–∞–π–ª–æ–≤** ‚Äî –º–µ—Ö–∞–Ω–∏–∑–º —É–¥–∞–ª–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤ –∏–∑ –Ω–∏–∂–µ–ª–µ–∂–∞—â–∏—Ö —Å–ª–æ—ë–≤.
- üîÑ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π –≤ –æ–¥–Ω—É –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é.

##### ‚ùå –ü–æ—á–µ–º—É AUFS –±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è <a name="link_16"></a>

- üß© **–°–ª–æ–∂–Ω–æ—Å—Ç—å —Å–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏—è:** —Ç—Ä–µ–±—É–µ—Ç –ø–∞—Ç—á–∞ —è–¥—Ä–∞ –∏ —Ä—É—á–Ω–æ–π —Å–±–æ—Ä–∫–∏ –º–æ–¥—É–ª–µ–π.
- üö´ **–ù–µ –≤–∫–ª—é—á—ë–Ω –≤ —è–¥—Ä–æ Linux** ‚Äî –∑–Ω–∞—á–∏—Ç, –Ω–µ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–∞–µ—Ç—Å—è –æ—Å–Ω–æ–≤–Ω—ã–º–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏.
- üì¶ **–ó–∞–º–µ–Ω—ë–Ω –Ω–∞ OverlayFS**, –∫–æ—Ç–æ—Ä—ã–π –≤–∫–ª—é—á—ë–Ω –≤ —è–¥—Ä–æ –∏ –ø—Ä–æ—â–µ –≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏.

üí° –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Å—Ç–∞—Ä—ã–µ –æ–±—Ä–∞–∑—ã Docker –∏–ª–∏ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, `Docker-in-Docker` –Ω–∞ —Å—Ç–∞—Ä–æ–º —è–¥—Ä–µ) –º–æ–≥—É—Ç –¥–æ —Å–∏—Ö –ø–æ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å AUFS. –í –Ω–æ–≤—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö –µ–≥–æ –ø—Ä–∏–º–µ–Ω—è—Ç—å –Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è.

## 5. Btrfs –∫–∞–∫ backend –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ <a name="link_17"></a>

**Btrfs** (B-tree Filesystem) ‚Äî —ç—Ç–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è CoW-—Ñ–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∞—è —Å–∂–∞—Ç–∏–µ, —Å–Ω–∞–ø—à–æ—Ç—ã, –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ, –∫–æ–Ω—Ç—Ä–æ–ª—å –∫–≤–æ—Ç –∏ –º–Ω–æ–≥–æ–µ –¥—Ä—É–≥–æ–µ. –û–Ω–∞ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤ Docker –∏ Podman –Ω–∞–ø—Ä—è–º—É—é –∫–∞–∫ `btrfs`-–¥—Ä–∞–π–≤–µ—Ä —Ö—Ä–∞–Ω–µ–Ω–∏—è.

##### üß© –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ Btrfs <a name="link_18"></a>

- –ü–æ–ª–Ω–∞—è **Copy-on-Write** –º–æ–¥–µ–ª—å –Ω–∞ —É—Ä–æ–≤–Ω–µ –≤—Å–µ–π —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã.
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ **—Å—É–±—Ç–æ–º–æ–≤** (subvolumes) ‚Äî –ª–æ–≥–∏—á–µ—Å–∫–∏—Ö —Ä–∞–∑–¥–µ–ª–æ–≤ –≤–Ω—É—Ç—Ä–∏ –§–°, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ —Å–Ω–∞–ø—à–æ—Ç–∏—Ç—å –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ.
- **–°–Ω–∞–ø—à–æ—Ç—ã** –∏ –æ—Ç–∫–∞—Ç—ã ‚Äî –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ, –Ω–µ–Ω–∞–≥—Ä—É–∑–æ—á–Ω—ã–µ.
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ **–≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ —Å–∂–∞—Ç–∏—è** (zstd, lzo) –∏ **qgroups** ‚Äî –∫–æ–Ω—Ç—Ä–æ–ª—è –∫–≤–æ—Ç –Ω–∞ –ø–æ–¥—Ç–æ–º–∞.

##### ‚öôÔ∏è –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ Docker / Podman <a name="link_19"></a>

–ß—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Btrfs –∫–∞–∫ –¥—Ä–∞–π–≤–µ—Ä —Ö—Ä–∞–Ω–µ–Ω–∏—è, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ:

1. –°–æ–∑–¥–∞—Ç—å Btrfs-—Ä–∞–∑–¥–µ–ª –∏–ª–∏ —Ç–æ–º (`mkfs.btrfs /dev/sdX`);
2. –£–∫–∞–∑–∞—Ç—å `--storage-driver=btrfs` –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ Docker/Podman, –ª–∏–±–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å `/etc/containers/storage.conf`;
3. –ö–∞–∂–¥—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –±—É–¥–µ—Ç —Ä–∞–∑–º–µ—â–∞—Ç—å—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º subvolume –≤–Ω—É—Ç—Ä–∏ –∫–æ—Ä–Ω–µ–≤–æ–≥–æ —Ç–æ–º–∞ Btrfs.

üí° `docker info` –ø–æ–∫–∞–∂–µ—Ç —Ç–µ–∫—É—â–∏–π –¥—Ä–∞–π–≤–µ—Ä —Ö—Ä–∞–Ω–µ–Ω–∏—è. –î–ª—è Btrfs —ç—Ç–æ –±—É–¥–µ—Ç `Storage Driver: btrfs`.

##### ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Btrfs <a name="link_20"></a>

- üöÄ **–ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤** —á–µ—Ä–µ–∑ subvolume clone.
- üåÄ **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–Ω–∞–ø—à–æ—Ç–æ–≤ –∏ –æ—Ç–∫–∞—Ç–æ–≤** –±–µ–∑ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.
- üì¶ **–í—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ —Å–∂–∞—Ç–∏–µ**: `compress=zstd`, —ç–∫–æ–Ω–æ–º–∏—è –¥–∏—Å–∫–∞.
- üìä **qgroups** –ø–æ–∑–≤–æ–ª—è—é—Ç –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å –æ–±—ä—ë–º —Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞ –∫–∞–∂–¥—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä.

##### ‚ö†Ô∏è –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ <a name="link_21"></a>

- üß™ **–ù–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –Ω–∞ —Å—Ç–∞—Ä—ã—Ö —è–¥—Ä–∞—Ö** (< 5.4) ‚Äî –≤–æ–∑–º–æ–∂–Ω—ã –±–∞–≥–∏, –æ—Å–æ–±–µ–Ω–Ω–æ —Å –∫–µ—à–µ–º –∏ —Å–Ω–∞–ø—à–æ—Ç–∞–º–∏.
- üß± **–¢—Ä–µ–±—É–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ —Ä–∞–∑–¥–µ–ª–∞ –∏–ª–∏ —Ç–æ–º–∞** ‚Äî –Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∑–∞–ø—É—Å–∫–∞—Ç—å –ø–æ–≤–µ—Ä—Ö ext4.
- ‚ùå **–ù–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –≤ overlay2-–¥—Ä–∞–π–≤–µ—Ä–µ**, –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º —Å –Ω–∏–º –Ω–∞–ø—Ä—è–º—É—é.

üîç **–ò—Ç–æ–≥:** Btrfs ‚Äî –º–æ—â–Ω—ã–π –∏ –≥–∏–±–∫–∏–π –≤—ã–±–æ—Ä –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω—ã—Ö —Ö–æ—Å—Ç–æ–≤, –æ—Å–æ–±–µ–Ω–Ω–æ –µ—Å–ª–∏ –≤–∞–∂–Ω—ã —Å–Ω–∞–ø—à–æ—Ç—ã, –æ—Ç–∫–∞—Ç—ã –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –º–µ—Å—Ç–∞. –û–¥–Ω–∞–∫–æ —Ç—Ä–µ–±—É–µ—Ç –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç–∏ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å–≤–µ–∂–µ–≥–æ —è–¥—Ä–∞.

## 6. ZFS –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ <a name="link_22"></a>

**ZFS** ‚Äî —ç—Ç–æ –º–æ—â–Ω–∞—è —Ñ–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –∏ –º–µ–Ω–µ–¥–∂–µ—Ä —Ç–æ–º–æ–≤ –≤ –æ–¥–Ω–æ–º. –û–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫—É —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö, —Å–Ω–∞–ø—à–æ—Ç—ã, –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—é, –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Å–∂–∞—Ç–∏–µ, —á—Ç–æ –¥–µ–ª–∞–µ—Ç –µ—ë –æ—Ç–ª–∏—á–Ω—ã–º –≤—ã–±–æ—Ä–æ–º –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω—ã—Ö —Ö–æ—Å—Ç–æ–≤ —Å –≤—ã—Å–æ–∫–∏–º–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏ –∫ –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏ –∏ —Ö—Ä–∞–Ω–µ–Ω–∏—é.

##### üîß –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ ZFS –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö <a name="link_23"></a>

- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã Docker/Podman –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `zfs` –∫–∞–∫ storage driver.
- –ö–∞–∂–¥—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Ä–∞–∑–º–µ—â–∞–µ—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º **ZFS dataset** –∏–ª–∏ **volume**.
- –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Å–æ–∑–¥–∞—ë—Ç—Å—è **–∫–ª–æ–Ω —Å–Ω–∞–ø—à–æ—Ç–∞**, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –±—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ –±–µ–∑ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è.

```
# –ü—Ä–∏–º–µ—Ä —Ä—É—á–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –ø—É–ª–∞ –∏ dataset
sudo zpool create tank /dev/sdX
sudo zfs create tank/containers

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ Docker
dockerd --storage-driver=zfs
```

üí° –í Podman –∏ Docker —Ç–∞–∫–∂–µ –º–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å –¥—Ä–∞–π–≤–µ—Ä —Ö—Ä–∞–Ω–µ–Ω–∏—è —á–µ—Ä–µ–∑ `/etc/containers/storage.conf` –∏–ª–∏ —Ñ–ª–∞–≥ `--storage-driver=zfs`.

##### ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ ZFS <a name="link_24"></a>

- üõ°Ô∏è **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏** (checksumming) ‚Äî –∑–∞—â–∏—Ç–∞ –æ—Ç silent corruption.
- üì¶ **–°–∂–∞—Ç–∏–µ –Ω–∞ –ª–µ—Ç—É** (–Ω–∞–ø—Ä–∏–º–µ—Ä, `lz4`, `zstd`), —ç–∫–æ–Ω–æ–º–∏—è –º–µ—Å—Ç–∞.
- üìÑ **–î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è** (–≤ –ø—Ä–æ–¥–µ ‚Äî –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ, —Ç—Ä–µ–±—É–µ—Ç –º–Ω–æ–≥–æ RAM).
- üåÄ **–°–Ω–∞–ø—à–æ—Ç—ã –∏ –∫–ª–æ–Ω—ã** ‚Äî –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ, –±–µ–∑ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö.
- üìä **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–≤–æ—Ç–∞–º–∏** –Ω–∞ —É—Ä–æ–≤–Ω–µ datasets.

##### ‚ö†Ô∏è –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ <a name="link_25"></a>

- ‚öôÔ∏è **–ù–µ –≤—Å—Ç—Ä–æ–µ–Ω –≤ —è–¥—Ä–æ Linux** (–≤–Ω–µ mainline) ‚Äî –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ `zfs-dkms` –∏–ª–∏ –ø–∞–∫–µ—Ç—ã –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–∞.
- üíΩ **–¢—Ä–µ–±—É–µ—Ç –≤—ã–¥–µ–ª–µ–Ω–Ω–æ–≥–æ –ø—É–ª–∞** (zpool) ‚Äî –Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∞ –æ–±—ã—á–Ω—ã—Ö ext4/xfs —Ä–∞–∑–¥–µ–ª–∞—Ö.
- üß† **–ë–æ–ª–µ–µ –≤—ã—Å–æ–∫–∏–µ –Ω–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã** –Ω–∞ RAM –∏ CPU, –æ—Å–æ–±–µ–Ω–Ω–æ –ø—Ä–∏ –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏.
- üìã **–°–ª–æ–∂–Ω–µ–µ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏** –∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–∏ –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å overlay2 –∏–ª–∏ Btrfs.

üí° **ZFS** –∏–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Å–µ—Ä–≤–µ—Ä–æ–≤, CI/CD-—Å–∏—Å—Ç–µ–º, –∞—Ä—Ö–∏–≤–æ–≤ –∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã, –≥–¥–µ –≤–∞–∂–Ω–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –∏ –∫–æ–Ω—Ç—Ä–æ–ª—å –¥–∞–Ω–Ω—ã—Ö. –û–¥–Ω–∞–∫–æ –¥–ª—è –¥–µ—Å–∫—Ç–æ–ø–æ–≤ –∏–ª–∏ –ø—Ä–æ—Å—Ç—ã—Ö —Ö–æ—Å—Ç–æ–≤ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–∑–±—ã—Ç–æ—á–Ω—ã–º.

## 7. –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥—Ä–∞–π–≤–µ—Ä–æ–≤ —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ Docker / Podman <a name="link_26"></a>

–ù–∏–∂–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –¥—Ä–∞–π–≤–µ—Ä–æ–≤ —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω—ã—Ö —Å–∏—Å—Ç–µ–º. –ö–∞–∂–¥—ã–π –∏–∑ –Ω–∏—Ö –∏–º–µ–µ—Ç —Å–≤–æ–∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ —Ö–æ—Å—Ç–∞.

| –§–° / –î—Ä–∞–π–≤–µ—Ä | CoW | Snapshot | –¢—Ä–µ–±—É–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ —Ä–∞–∑–¥–µ–ª–∞ | –°–∂–∞—Ç–∏–µ | –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤ —è–¥—Ä–µ  |
| ------------ | --- | -------- | -------------------------- | ------ | ----------------- |
| **overlay2** | ‚úÖ  | ‚ùå       | ‚ùå                         | ‚ùå     | ‚úÖ                |
| **aufs**     | ‚úÖ  | ‚ùå       | ‚ùå                         | ‚ùå     | ‚ùå (–ø–∞—Ç—á —è–¥—Ä–∞)    |
| **btrfs**    | ‚úÖ  | ‚úÖ       | ‚úÖ (–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ)            | ‚úÖ     | ‚úÖ                |
| **zfs**      | ‚úÖ  | ‚úÖ       | ‚úÖ                         | ‚úÖ     | ‚ùå (–≤–Ω–µ mainline) |

üí° **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**  
‚ñ∏ `overlay2` ‚Äî –æ–ø—Ç–∏–º–∞–ª–µ–Ω –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —Å–ª—É—á–∞–µ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é).  
‚ñ∏ `btrfs` ‚Äî –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è CI/CD, dev-—Å—Ä–µ–¥ –∏ —Å–∏—Å—Ç–µ–º —Å –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å—é –æ—Ç–∫–∞—Ç–æ–≤.  
‚ñ∏ `zfs` ‚Äî –≤—ã–±–æ—Ä –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω-—Å–µ—Ä–≤–µ—Ä–æ–≤ —Å –≤—ã—Å–æ–∫–æ–π –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å—é.  
‚ñ∏ `aufs` ‚Äî —É—Å—Ç–∞—Ä–µ–ª, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è.

## 8. –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ <a name="link_27"></a>

–í—ã–±–æ—Ä —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã –∏ –¥—Ä–∞–π–≤–µ—Ä–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∑–∞–¥–∞—á, —Ç–∏–ø–∞ —Ö–æ—Å—Ç–∞, –∞ —Ç–∞–∫–∂–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∫ –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏, —Å–∫–æ—Ä–æ—Å—Ç–∏ –æ—Ç–∫–∞—Ç–æ–≤ –∏ –æ–±—ä—ë–º—É I/O. –ù–∏–∂–µ –ø—Ä–∏–≤–µ–¥–µ–Ω—ã —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏.

##### üì¶ **overlay2 –Ω–∞ Ubuntu/Debian** <a name="link_28"></a>

- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ Docker/Podman –Ω–∞ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–æ–≤ (Ubuntu, Debian, Fedora).
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–π –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏: —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–≤–µ—Ä—Ö ext4 –∏–ª–∏ XFS.
- –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Ç–∏–ø–∏—á–Ω—ã—Ö –Ω–∞–≥—Ä—É–∑–æ–∫ —Å –Ω–µ–±–æ–ª—å—à–∏–º –æ–±—ä—ë–º–æ–º I/O.

##### ‚öôÔ∏è **btrfs –¥–ª—è embedded –∏ CI/CD** <a name="link_29"></a>

- –ü–æ–∑–≤–æ–ª—è–µ—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å, –∫–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –∏ –æ—Ç–∫–∞—Ç—ã–≤–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —á–µ—Ä–µ–∑ subvolumes –∏ snapshots.
- –£–¥–æ–±–µ–Ω –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ç–µ—Å—Ç–æ–≤, –±—ã—Å—Ç—Ä–æ–π —Å–º–µ–Ω—ã –æ–∫—Ä—É–∂–µ–Ω–∏–π, —Å–±–æ—Ä–∫–∏ –æ–±—Ä–∞–∑–æ–≤.
- –•–æ—Ä–æ—à –¥–ª—è –≤—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã—Ö —Å–∏—Å—Ç–µ–º, –≥–¥–µ –≤–∞–∂–Ω–∞ —ç–∫–æ–Ω–æ–º–∏—è –º–µ—Å—Ç–∞ (—Å–∂–∞—Ç–∏–µ + –∫–æ–Ω—Ç—Ä–æ–ª—å –∫–≤–æ—Ç).

##### üíº **ZFS –Ω–∞ –Ω–∞–¥—ë–∂–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö** <a name="link_30"></a>

- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ã—Ö —Å—Ä–µ–¥–∞—Ö, –≥–¥–µ –≤–∞–∂–Ω–∞ **—Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö** –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–π (checksumming).
- –ê–∫—Ç—É–∞–ª–µ–Ω –≤ OpenZFS-—Å–∏—Å—Ç–µ–º–∞—Ö, NAS-—Ö–æ—Å—Ç–∞—Ö, CI-—Å–µ—Ä–≤–µ—Ä–∞—Ö —Å –≤—ã—Å–æ–∫–æ–π I/O-–Ω–∞–≥—Ä—É–∑–∫–æ–π.
- –ü–æ–∑–≤–æ–ª—è–µ—Ç –¥–µ–ª–∞—Ç—å –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—é, –∂—ë—Å—Ç–∫–∏–µ –∫–≤–æ—Ç—ã, –∞—Ç–æ–º–∞—Ä–Ω—ã–µ —Å–Ω–∞–ø—à–æ—Ç—ã –∏ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—é.

##### üö´ **–ö–æ–≥–¥–∞ –Ω–µ —Å—Ç–æ–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å overlay2** <a name="link_31"></a>

- üìâ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω—ã–º I/O (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ë–î –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞).
- üëÄ –ü—Ä–æ–≥—Ä–∞–º–º—ã, –∞–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–µ `inotify` (–Ω–∞–ø—Ä–∏–º–µ—Ä, hot-reload –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏) ‚Äî –º–æ–≥—É—Ç –Ω–µ –≤–∏–¥–µ—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è.
- üìÇ –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —Å –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –º–µ–ª–∫–∏—Ö —Ñ–∞–π–ª–æ–≤ ‚Äî –ø–∞–¥–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.

‚úÖ **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –Ω–∞—á–∏–Ω–∞–π—Ç–µ —Å `overlay2`, –Ω–æ –¥–ª—è —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –Ω–µ –±–æ–π—Ç–µ—Å—å –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ Btrfs –∏–ª–∏ ZFS ‚Äî —ç—Ç–æ –æ–∫—É–ø–∞–µ—Ç—Å—è –≥–∏–±–∫–æ—Å—Ç—å—é.

## 9. –°–æ–≤–µ—Ç—ã –ø–æ –≤—ã–±–æ—Ä—É <a name="link_32"></a>

–ü—Ä–∏ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –≤–∞–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É, –∫–æ—Ç–æ—Ä–∞—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç **—Ç–µ–∫—É—â–∏–º –∏ –±—É–¥—É—â–∏–º –Ω–∞–≥—Ä—É–∑–∫–∞–º**. –ù–∏–∂–µ ‚Äî –ø—Ä–∞–∫—Ç–∏—á–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏—è.

- ‚úÖ **–ù–∞—á–∏–Ω–∞–π—Ç–µ —Å `overlay2`**, –µ—Å–ª–∏ –Ω–µ —É–≤–µ—Ä–µ–Ω—ã. –≠—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ Docker/Podman, —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –æ—Å–æ–±–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.
- üì¶ **–•—Ä–∞–Ω–∏—Ç–µ –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤–Ω–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `volume` –∏–ª–∏ `bind mount`. –ù–µ –ø–æ–ª–∞–≥–∞–π—Ç–µ—Å—å –Ω–∞ writable layer.
- üß™ **Btrfs –∏ ZFS ‚Äî –º–æ—â–Ω—ã–π –≤—ã–±–æ—Ä** –¥–ª—è dev/CI, —Å–Ω–∞–ø—à–æ—Ç–æ–≤, —Ç–µ—Å—Ç–æ–≤—ã—Ö —Å—Ä–µ–¥ –∏ –∫–æ–Ω—Ç—Ä–æ–ª—è –∑–∞ –¥–∞–Ω–Ω—ã–º–∏.
- üîê **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å SELinux –∏ AppArmor** ‚Äî –æ—Å–æ–±–µ–Ω–Ω–æ –≤–∞–∂–Ω–æ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `overlay2`, —Ç.–∫. –æ–Ω–∏ –Ω–∞–∫–ª–∞–¥—ã–≤–∞—é—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ mount namespaces.
- ‚öôÔ∏è **–ò–∑–±–µ–≥–∞–π—Ç–µ AUFS** –≤ –Ω–æ–≤—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö ‚Äî –æ–Ω —É—Å—Ç–∞—Ä–µ–ª, –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤ mainline-—è–¥—Ä–µ.

üí° **–°–æ–≤–µ—Ç:** _–§–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ ‚Äî –Ω–µ —Ç–æ–ª—å–∫–æ –ø—Ä–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –Ω–æ –∏ –ø—Ä–æ —É–¥–æ–±—Å—Ç–≤–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π, —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è._

## 10. –ó–∞–∫–ª—é—á–µ–Ω–∏–µ <a name="link_33"></a>

–í—ã–±–æ—Ä —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã –∏ –¥—Ä–∞–π–≤–µ—Ä–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω–æ–π —Å—Ä–µ–¥–µ ‚Äî —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–µ—Ç–∞–ª—å, –∞ **–∫–ª—é—á–µ–≤–æ–π —Ñ–∞–∫—Ç–æ—Ä —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏, –≥–∏–±–∫–æ—Å—Ç–∏ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**.

- üß© **–§–∞–π–ª–æ–≤—ã–µ —Å–∏—Å—Ç–µ–º—ã ‚Äî –Ω–µ –ø—Ä–æ—Å—Ç–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ, –∞ —á–∞—Å—Ç—å —ç–∫–æ—Å–∏—Å—Ç–µ–º—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤.**
- ‚öôÔ∏è **`overlay2` ‚Äî —ç—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç –∏ –±–µ–∑–æ–ø–∞—Å–Ω–∞—è —Ç–æ—á–∫–∞ —Å—Ç–∞—Ä—Ç–∞**, –Ω–æ –æ–Ω –Ω–µ —Ä–µ—à–∞–µ—Ç –≤—Å–µ—Ö –∑–∞–¥–∞—á –∏ –º–æ–∂–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å.
- üåÄ **`Btrfs` –∏ `ZFS` ‚Äî —ç—Ç–æ –≤—ã–±–æ—Ä –¥–ª—è —Ç–µ—Ö, –∫—Ç–æ —Ü–µ–Ω–∏—Ç —Å–Ω–∞–ø—à–æ—Ç—ã, –æ—Ç–∫–∞—Ç—ã, –∫–æ–Ω—Ç—Ä–æ–ª—å —Ä–µ—Å—É—Ä—Å–æ–≤ –∏ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö.** –û–Ω–∏ —Ç—Ä–µ–±—É—é—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –ø–æ–Ω–∏–º–∞–Ω–∏—è, –Ω–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏.

‚úÖ **–í—ã–≤–æ–¥:** –Ω–µ—Ç —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è ‚Äî –≤—ã–±–∏—Ä–∞–π—Ç–µ –¥—Ä–∞–π–≤–µ—Ä —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç _–Ω–∞–≥—Ä—É–∑–∫–∏, —Ü–µ–ª–µ–π, —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∫ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ –∏ —É–¥–æ–±—Å—Ç–≤—É –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è_.
